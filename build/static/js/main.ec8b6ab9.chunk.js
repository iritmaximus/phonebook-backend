(this["webpackJsonpphonebook-frontend-react"]=this["webpackJsonpphonebook-frontend-react"]||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),o=t(3),a=t(1),u=t(0),i=function(e){var n=e.name,t=e.number,r=e.id,c=e.removePerson;return Object(u.jsxs)("div",{children:[n,": ",t,Object(u.jsx)("button",{onClick:function(){return c(n,r)},children:"delete"})]})},s=function(e){var n=e.persons,t=e.removePerson;return Object(u.jsx)(u.Fragment,{children:n.map((function(e){return Object(u.jsx)(i,{name:e.name,number:e.number,id:e.id,removePerson:t},e.name)}))})},l=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,c=e.handleNewName,o=e.handleNewNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsx)("h2",{children:"Add a new:"}),Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.newFilter,t=e.handleNewFilter;return Object(u.jsxs)(u.Fragment,{children:["Filter shown with:",Object(u.jsx)("input",{value:n,onChange:t})]})},j=t(4),b=t.n(j),m="/api/persons",h=function(){return b.a.get(m).then((function(e){return e.data}))},f=function(e){return b.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message,t=e.isError;return console.log("Is Error?:",t),null===n?null:t?Object(u.jsx)("div",{className:"error",children:n}):Object(u.jsx)("div",{className:"notification",children:n})},x=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1];Object(a.useEffect)((function(){h().then((function(e){return r(e)}))}),[]);var c=Object(a.useState)(""),i=Object(o.a)(c,2),j=i[0],b=i[1],m=Object(a.useState)(""),x=Object(o.a)(m,2),p=x[0],g=x[1],N=Object(a.useState)(""),k=Object(o.a)(N,2),F=k[0],P=k[1],S=Object(a.useState)(!0),C=Object(o.a)(S,2),E=C[0],y=C[1],I=Object(a.useState)(null),T=Object(o.a)(I,2),B=T[0],D=T[1],J=Object(a.useState)(!1),L=Object(o.a)(J,2),A=L[0],R=L[1],U=E?t:t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(w,{message:B,isError:A}),Object(u.jsx)("div",{children:Object(u.jsx)(d,{newFilter:F,handleNewFilter:function(e){console.log("Filter:",e.target.value),P(e.target.value),""!==F&&y(!1)}})}),Object(u.jsx)("div",{children:Object(u.jsx)(l,{addPerson:function(e){e.preventDefault(),console.log("Button clicked...",e.target);var n={name:j,number:p,id:Number(t[t.length-1].id)+1};void 0!==t.find((function(e){return e.name===j}))?window.confirm("".concat(j," is already in the phonebook. Replace the old number with a new one?"))&&(O(t.find((function(e){return e.name===j})).id,n).then(r(t.map((function(e){return e.name===j?n:e})))),D("Updated ".concat(j,"'s number")),R(!1),setTimeout((function(){D(null)}),5e3)):(f(n,n.id),r(t.concat(n)),D("".concat(j," added to the phonebook")),R(!1),setTimeout((function(){D(null)}),5e3),console.log("Persons",t));b(""),g("")},newName:j,newNumber:p,handleNewName:function(e){console.log("Name:",e.target.value),b(e.target.value)},handleNewNumber:function(e){console.log("Number:",e.target.value),g(e.target.value)}})}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{persons:U,removePerson:function(e,n){window.confirm("Delete ".concat(e,"?"))&&v(n).then(r(t.filter((function(e){return e.id!==n})))).catch((function(n){D("Information of ".concat(e," was already removed from the server")),R(!0),setTimeout((function(){D(null),R(!1)}),5e3)}))}})]})};t(40);c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.ec8b6ab9.chunk.js.map