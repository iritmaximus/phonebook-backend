{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","name","number","id","removePerson","onClick","Persons","persons","map","person","PersonForm","addPerson","newName","newNumber","handleNewName","handleNewNumber","onSubmit","value","onChange","type","Filter","newFilter","handleNewFilter","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","isError","className","App","useState","setPersons","useEffect","personService","initialPersons","setNewName","setNewNumber","setNewFilter","showAll","setShowAll","setMessage","setIsError","filteredPersons","filter","toLowerCase","includes","event","console","log","target","preventDefault","newPerson","Number","length","undefined","find","window","confirm","setTimeout","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.11018eac.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ name, number, id, removePerson }) => {\n  return (\n    <div>\n      {name}: {number} \n      <button onClick={() => removePerson(name, id)}>delete</button>\n    </div>\n  )\n}\n\nconst Persons = ({ persons, removePerson }) => {\n\n  return (\n    <>\n      {persons.map(person => \n        <Person \n        name={person.name} \n        key={person.name} \n        number={person.number}\n        id={person.id}\n        removePerson={removePerson} />\n      )}\n    </>\n  )\n}\n\nexport default Persons","import React from 'react' \n\n\nconst PersonForm = ({ addPerson, newName, newNumber, handleNewName, handleNewNumber }) => {\n\n  return (\n    <form onSubmit={addPerson}>\n        <h2>Add a new:</h2>\n        <div>\n          name: <input \n          value={newName}\n          onChange={handleNewName}\n          />\n        </div>\n        <div>\n          number: <input\n          value={newNumber}\n          onChange={handleNewNumber}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ newFilter, handleNewFilter }) => {\n\n  return (\n    <>\n      Filter shown with: \n      <input \n      value={newFilter}\n      onChange={handleNewFilter}\n      />\n    </>\n  )\n}\n\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst add = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\n// Miksi notes esimerkkitehtävässä ei tullut tästä tuota varoitusta:\n// Line 27:1:  Assign object to a variable before exporting as module default  import/no-anonymous-default-export\n// en ymmärrä\nexport default { getAll, add, update, remove }","const Notification = ({ message, isError }) => {\n\n  if (message === null) {\n    return null\n  } else {\n    const alertToShow = isError \n      ? <div className='error'>{message}</div>\n      : <div className='notification'>{message}</div>\n      \n    return alertToShow\n  }\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n\n  useEffect(() => {\n    personService\n      .getAll()\n        .then(initialPersons => setPersons(initialPersons))\n  }, []);\n  \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ showAll, setShowAll ] = useState(true)\n  const [ message, setMessage ] = useState(null)\n  const [ isError, setIsError ] = useState(false)\n  \n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('Button clicked...', event.target)\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      id: Number(persons[persons.length - 1].id) + 1  \n    }\n\n    if (persons.find(person => person.name === newName) !== undefined) {\n      const result = window.confirm(\n        `${newName} is already in the phonebook. Replace the old number with a new one?`\n      )\n\n      if (result) {\n        personService\n          .update(persons.find(person => person.name === newName).id, newPerson)  \n          .then(setPersons(persons.map(person => person.name === newName ? newPerson : person)))\n        \n          setMessage(`Updated ${newName}'s number`)\n        setIsError(false)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      } \n\n    } else {\n      personService\n        .add(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response))\n        })\n        .catch(error => {\n          console.log(\"Error\")\n          console.log(\"Error message:\", error.response.data)\n          setMessage(error.response.data[\"error\"])\n          setIsError(true)\n\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n            return\n        })\n\n      if (!isError) {\n        setMessage(`${newName} added to the phonebook`)\n        \n        setTimeout(() => {\n          setMessage(null)\n          setIsError(false)\n        }, 5000)\n      } else {\n        console.log(\"Error state is still on\")\n        return\n      }\n\n      \n\n      console.log('Persons', persons)\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const removePerson = (name, id) => {\n    const result = window.confirm(`Delete ${name}?`)\n\n    if (result) {\n      personService \n        .remove(id)\n        .then(\n          setPersons(persons.filter(person => person.id !== id)))\n        \n        .catch(error => {\n          setMessage(\n            `Information of ${name} was already removed from the server`\n          )\n          setIsError(true)\n            setTimeout(() => {\n              setMessage(null)\n              setIsError(false)\n            }, 5000)\n        })\n    }\n  }\n\n\n  const filteredPersons = showAll \n    ? persons \n    // vähän ikävän näköinen, mutta molemmat muunnetaan pieniksi kirjaimiksi\n    : persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n  \n\n  const handleNewName = (event) => {\n    console.log('Name:', event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    console.log('Number:', event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleNewFilter = (event) => {\n    console.log('Filter:', event.target.value)\n    setNewFilter(event.target.value)\n\n    if (newFilter !== '') {\n      setShowAll(false)\n    }\n\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} isError={isError}/>\n      <div>\n        <Filter \n        newFilter={newFilter}\n        handleNewFilter={handleNewFilter}\n        />\n      </div>\n      <div>\n        <PersonForm \n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNewName={handleNewName}\n        handleNewNumber={handleNewNumber}\n        />\n      </div>\n      \n      <h2>Numbers</h2>\n\n      <Persons \n      persons={filteredPersons}\n      removePerson={removePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}