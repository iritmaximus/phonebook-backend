(this["webpackJsonpphonebook-frontend-react"]=this["webpackJsonpphonebook-frontend-react"]||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(16),o=t.n(r),c=t(3),a=t(1),i=t(0),u=function(e){var n=e.name,t=e.number,r=e.id,o=e.removePerson;return Object(i.jsxs)("div",{children:[n,": ",t,Object(i.jsx)("button",{onClick:function(){return o(n,r)},children:"delete"})]})},s=function(e){var n=e.persons,t=e.removePerson;return Object(i.jsx)(i.Fragment,{children:n.map((function(e){return Object(i.jsx)(u,{name:e.name,number:e.number,id:e.id,removePerson:t},e.name)}))})},l=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,o=e.handleNewName,c=e.handleNewNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsx)("h2",{children:"Add a new:"}),Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:o})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:r,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.newFilter,t=e.handleNewFilter;return Object(i.jsxs)(i.Fragment,{children:["Filter shown with:",Object(i.jsx)("input",{value:n,onChange:t})]})},j=t(4),b=t.n(j),m="/api/persons",f=function(){return b.a.get(m).then((function(e){return e.data}))},h=function(e){return b.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.message,t=e.isError;return null===n?null:t?Object(i.jsx)("div",{className:"error",children:n}):Object(i.jsx)("div",{className:"notification",children:n})},p=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1];Object(a.useEffect)((function(){f().then((function(e){return r(e)}))}),[]);var o=Object(a.useState)(""),u=Object(c.a)(o,2),j=u[0],b=u[1],m=Object(a.useState)(""),p=Object(c.a)(m,2),w=p[0],x=p[1],N=Object(a.useState)(""),k=Object(c.a)(N,2),F=k[0],P=k[1],S=Object(a.useState)(!0),E=Object(c.a)(S,2),C=E[0],y=E[1],T=Object(a.useState)(null),B=Object(c.a)(T,2),D=B[0],I=B[1],J=Object(a.useState)(!1),L=Object(c.a)(J,2),A=L[0],R=L[1],U=C?t:t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(g,{message:D,isError:A}),Object(i.jsx)("div",{children:Object(i.jsx)(d,{newFilter:F,handleNewFilter:function(e){console.log("Filter:",e.target.value),P(e.target.value),""!==F&&y(!1)}})}),Object(i.jsx)("div",{children:Object(i.jsx)(l,{addPerson:function(e){e.preventDefault(),console.log("Button clicked...",e.target);var n={name:j,number:w,id:Number(t[t.length-1].id)+1};if(void 0!==t.find((function(e){return e.name===j}))){window.confirm("".concat(j," is already in the phonebook. Replace the old number with a new one?"))&&(O(t.find((function(e){return e.name===j})).id,n).then(r(t.map((function(e){return e.name===j?n:e})))),I("Updated ".concat(j,"'s number")),R(!1),setTimeout((function(){I(null)}),5e3))}else{if(h(n).then((function(e){r(t.concat(e))})).catch((function(e){console.log("Error"),console.log("Error message:",e.response.data),I(e.response.data.error),R(!0),setTimeout((function(){I(null)}),5e3)})),A)return void console.log("Error state is still on");I("".concat(j," added to the phonebook")),setTimeout((function(){I(null),R(!1)}),5e3),console.log("Persons",t)}b(""),x("")},newName:j,newNumber:w,handleNewName:function(e){console.log("Name:",e.target.value),b(e.target.value)},handleNewNumber:function(e){console.log("Number:",e.target.value),x(e.target.value)}})}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(s,{persons:U,removePerson:function(e,n){window.confirm("Delete ".concat(e,"?"))&&v(n).then(r(t.filter((function(e){return e.id!==n})))).catch((function(n){I("Information of ".concat(e," was already removed from the server")),R(!0),setTimeout((function(){I(null),R(!1)}),5e3)}))}})]})};t(40);o.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.11018eac.chunk.js.map